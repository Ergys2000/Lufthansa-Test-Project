{"ast":null,"code":"var _jsxFileName = \"/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/admin/UserList.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { ContentPageContext, Popup, Label, Input, Select, ActionButton, Form, DangerButton } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport apiLink from '../API';\nimport { useRouteMatch, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserList = props => {\n  _s();\n\n  const {\n    userId\n  } = useParams();\n  const authContext = useContext(AuthContext);\n  const contentPageContext = useContext(ContentPageContext);\n  const {\n    url\n  } = useRouteMatch();\n  useEffect(() => {\n    contentPageContext.setLocationList([{\n      title: \"User list\",\n      url: url\n    }]);\n  }, []);\n  const [users, setUsers] = useState([]);\n  const supervisors = users.filter(user => user.type === \"supervisor\");\n  useEffect(() => {\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    fetch(`${apiLink}/admin/${userId}/users`, {\n      headers: {\n        'Authorization': bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        setUsers(res.result);\n      } else {\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n      className: \"p-3 mx-10 my-5 w-20\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"material-icons\",\n        children: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 50\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Firstname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Lastname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Supervisor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 5\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(UserItem, {\n        user: user,\n        supervisors: supervisors\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 24\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserList, \"AXWvYFB7R7yGdSCoAXQRRfS9TMI=\", false, function () {\n  return [useParams, useRouteMatch];\n});\n\n_c = UserList;\n\nconst UserItem = props => {\n  _s2();\n\n  var _user$supervisor;\n\n  const {\n    user,\n    supervisors\n  } = props;\n  const [popupShown, setPopupShown] = useState(false);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setPopupShown(true),\n      className: \"flex flex-row justify-center w-full hover:bg-gray-400 p-5 border-b border-gray-400\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.type\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.firstname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.lastname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: (_user$supervisor = user.supervisor) === null || _user$supervisor === void 0 ? void 0 : _user$supervisor.firstname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this), popupShown ? /*#__PURE__*/_jsxDEV(UserView, {\n      user: user,\n      close: () => setPopupShown(false),\n      supervisors: supervisors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 18\n    }, this) : null]\n  }, void 0, true);\n};\n\n_s2(UserItem, \"3s3o9bVkFE3J9Ei9WDJsh8rCwko=\");\n\n_c2 = UserItem;\n\nconst UserView = props => {\n  _s3();\n\n  const authContext = useContext(AuthContext);\n  const {\n    close,\n    supervisors\n  } = props;\n  let {\n    user\n  } = props;\n  const [form, setForm] = useState({ ...user\n  });\n\n  const onChange = event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (name === \"type\") {\n      if (value === \"admin\" || value === \"supervisor\") {\n        setForm({ ...form,\n          [name]: value,\n          supervisor: null\n        });\n        return;\n      }\n    }\n\n    setForm({ ...form,\n      [name]: value\n    });\n  };\n\n  const changeSupervisor = async event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (value == \"0\") {\n      setForm({ ...form,\n        supervisor: null\n      });\n      return;\n    }\n\n    for (let i = 0; i < supervisors.length; i++) {\n      if (supervisors[i].id == value) {\n        setForm({ ...form,\n          supervisor: supervisors[i]\n        });\n      }\n    }\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": bearer\n      },\n      body: JSON.stringify(form)\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n\n        for (const property in user) {\n          user[property] = form[property];\n        }\n\n        close();\n      } else {\n        console.log(res);\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const onDelete = async event => {\n    event.preventDefault();\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n      method: \"delete\",\n      headers: {\n        \"Authorization\": bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n        close();\n      } else {\n        console.log(res);\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Popup, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-lg text-center\",\n          children: `${user.firstname} ${user.lastname}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: props.close,\n          className: \"material-icons cursor-pointer text-gray-600 hover:text-gray-800\",\n          children: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"email\",\n            onChange: onChange,\n            value: form.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Firstname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"firstname\",\n            onChange: onChange,\n            value: form.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lastname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"lastname\",\n            onChange: onChange,\n            value: form.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"type\",\n            onChange: onChange,\n            value: form.type\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Start date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"date\",\n            name: \"startDate\",\n            onChange: onChange,\n            value: form.startDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Supervisor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            disabled: form.type === \"supervisor\" || form.type === \"admin\",\n            name: \"supervisor\",\n            onChange: changeSupervisor,\n            value: form.supervisor == null ? 0 : form.supervisor.id,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 0,\n              children: \"No supervisor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 8\n            }, this), supervisors.map(supervisor => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: supervisor.id,\n              children: `${supervisor.firstname} ${supervisor.lastname}`\n            }, supervisor.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 9\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n          className: \"p-3 mt-3 w-40\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DangerButton, {\n          onClick: onDelete,\n          className: \"p-3 mt-3 w-40\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 3\n  }, this);\n};\n\n_s3(UserView, \"h1AyEwmNCorrT6U6vdX6ZewIEG0=\");\n\n_c3 = UserView;\nexport default UserList;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"UserList\");\n$RefreshReg$(_c2, \"UserItem\");\n$RefreshReg$(_c3, \"UserView\");","map":{"version":3,"sources":["/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/admin/UserList.tsx"],"names":["useContext","useEffect","useState","ContentPageContext","Popup","Label","Input","Select","ActionButton","Form","DangerButton","AuthContext","apiLink","useRouteMatch","useParams","UserList","props","userId","authContext","contentPageContext","url","setLocationList","title","users","setUsers","supervisors","filter","user","type","bearer","jwtToken","fetch","headers","then","res","json","status","result","alert","message","catch","err","console","log","map","id","UserItem","popupShown","setPopupShown","email","firstname","lastname","supervisor","UserView","close","form","setForm","onChange","event","preventDefault","name","value","target","changeSupervisor","i","length","onSubmit","method","body","JSON","stringify","property","onDelete","startDate"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { ContentPage, ContentPageContext, Popup, Label, Input, Select, ActionButton, Form, DangerButton } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport apiLink from '../API';\nimport { useRouteMatch, useParams } from 'react-router-dom';\nimport { User } from '../types/Common';\n\nconst UserList = (props: any) => {\n\tconst { userId } = useParams() as any;\n\tconst authContext = useContext(AuthContext);\n\tconst contentPageContext = useContext(ContentPageContext);\n\tconst { url } = useRouteMatch();\n\n\tuseEffect(() => {\n\t\tcontentPageContext.setLocationList([{ title: \"User list\", url: url }]);\n\t}, []);\n\n\tconst [users, setUsers] = useState<User[]>([]);\n\tconst supervisors = users.filter(user => user.type === \"supervisor\");\n\tuseEffect(() => {\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tfetch(`${apiLink}/admin/${userId}/users`, {\n\t\t\theaders: {\n\t\t\t\t'Authorization': bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\tsetUsers(res.result);\n\t\t\t\t} else {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}, []);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<ActionButton className=\"p-3 mx-10 my-5 w-20\"><i className=\"material-icons\">add</i></ActionButton>\n\t\t\t<div className=\"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\">\n\t\t\t\t<div className=\"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Type</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Email</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Firstname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Lastname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Supervisor</p>\n\t\t\t\t</div>\n\t\t\t\t{users.map(user => <UserItem key={user.id} user={user} supervisors={supervisors} />)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst UserItem = (props: { user: User, supervisors: User[] }) => {\n\tconst { user, supervisors } = props;\n\tconst [popupShown, setPopupShown] = useState(false);\n\treturn (\n\t\t<>\n\t\t\t<div onClick={() => setPopupShown(true)}\n\t\t\t\tclassName=\"flex flex-row justify-center w-full hover:bg-gray-400 p-5 border-b border-gray-400\">\n\t\t\t\t<p className=\"flex-1 text-center\">{user.type}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.email}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.firstname}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.lastname}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.supervisor?.firstname}</p>\n\t\t\t</div>\n\t\t\t{popupShown ? <UserView user={user} close={() => setPopupShown(false)} supervisors={supervisors} /> : null}\n\t\t</>\n\t);\n}\n\nconst UserView = (props: { supervisors: User[], user: User, close: () => void }) => {\n\tconst authContext = useContext(AuthContext);\n\tconst { close, supervisors } = props;\n\tlet { user } = props;\n\n\tconst [form, setForm] = useState<User>({ ...user });\n\n\tconst onChange = (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\n\t\tif (name === \"type\") {\n\t\t\tif (value === \"admin\" || value === \"supervisor\") {\n\t\t\t\tsetForm({ ...form, [name]: value, supervisor: null });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tsetForm({ ...form, [name]: value });\n\t}\n\n\tconst changeSupervisor = async (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\t\tif (value == \"0\") {\n\t\t\tsetForm({ ...form, supervisor: null });\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < supervisors.length; i++) {\n\t\t\tif (supervisors[i].id == value) {\n\t\t\t\tsetForm({ ...form, supervisor: supervisors[i] });\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onSubmit = async (event: React.FormEvent) => {\n\t\tevent.preventDefault();\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n\t\t\tmethod: \"put\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": bearer\n\t\t\t},\n\t\t\tbody: JSON.stringify(form)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tfor (const property in user) {\n\t\t\t\t\t\t(user as any)[property] = (form as any)[property];\n\t\t\t\t\t}\n\t\t\t\t\tclose();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\tconst onDelete = async (event: React.FormEvent) => {\n\t\tevent.preventDefault();\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n\t\t\tmethod: \"delete\",\n\t\t\theaders: {\n\t\t\t\t\"Authorization\": bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tclose();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\treturn (\n\t\t<Popup>\n\t\t\t<div className=\"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\">\n\n\t\t\t\t<div className=\"flex flex-row justify-center\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-lg text-center\">{`${user.firstname} ${user.lastname}`}</p>\n\t\t\t\t\t<i onClick={props.close} className=\"material-icons cursor-pointer text-gray-600 hover:text-gray-800\">close</i>\n\t\t\t\t</div>\n\n\t\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Email</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"email\" onChange={onChange} value={form.email}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Firstname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"firstname\" onChange={onChange} value={form.firstname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Lastname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"lastname\" onChange={onChange} value={form.lastname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Type</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"type\" onChange={onChange} value={form.type}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Start date</p>\n\t\t\t\t\t\t<Input type=\"date\" name=\"startDate\" onChange={onChange} value={form.startDate}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Supervisor</p>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tdisabled={form.type === \"supervisor\" || form.type === \"admin\"}\n\t\t\t\t\t\t\tname=\"supervisor\" onChange={changeSupervisor}\n\t\t\t\t\t\t\tvalue={form.supervisor == null ? 0 : form.supervisor.id}>\n\n\t\t\t\t\t\t\t<option value={0}>{\"No supervisor\"}</option>\n\t\t\t\t\t\t\t{supervisors.map(supervisor =>\n\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\tkey={supervisor.id}\n\t\t\t\t\t\t\t\t\tvalue={supervisor.id}>{`${supervisor.firstname} ${supervisor.lastname}`}</option>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<ActionButton className=\"p-3 mt-3 w-40\">Update</ActionButton>\n\t\t\t\t\t<DangerButton onClick={onDelete} className=\"p-3 mt-3 w-40\">Delete</DangerButton>\n\t\t\t\t</Form>\n\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport default UserList;\n"]},"metadata":{},"sourceType":"module"}