{"ast":null,"code":"var _jsxFileName = \"/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/admin/UserList.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { ContentPageContext, Popup, Label, Input, Select, ActionButton, Form, DangerButton } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport apiLink from '../API';\nimport { useRouteMatch, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserList = props => {\n  _s();\n\n  const {\n    userId\n  } = useParams();\n  const authContext = useContext(AuthContext);\n  const contentPageContext = useContext(ContentPageContext);\n  const {\n    url\n  } = useRouteMatch();\n  useEffect(() => {\n    contentPageContext.setLocationList([{\n      title: \"User list\",\n      url: url\n    }]);\n  }, []);\n  const [users, setUsers] = useState([]);\n  const [shouldUpdate, setShouldUpdate] = useState(0);\n  useEffect(() => {\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    fetch(`${apiLink}/admin/${userId}/users`, {\n      headers: {\n        'Authorization': bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        setUsers(res.result);\n      } else {\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  }, [userId, shouldUpdate]);\n  const [addUser, setAddUser] = useState(false);\n  const supervisors = users.filter(user => user.type === \"supervisor\");\n\n  const updateList = () => {\n    setShouldUpdate(shouldUpdate + 1);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n      onClick: () => setAddUser(true),\n      background: \"green\",\n      className: \"p-1 mx-10 my-5 w-14\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"material-icons\",\n        children: \"add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }, this), addUser ? /*#__PURE__*/_jsxDEV(AddUserForm, {\n      update: updateList,\n      supervisors: supervisors,\n      close: () => setAddUser(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Firstname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Lastname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Supervisor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(UserItem, {\n        update: updateList,\n        user: user,\n        supervisors: supervisors\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 24\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserList, \"fOxAGwynRlNeooupbS6j1/NBlbE=\", false, function () {\n  return [useParams, useRouteMatch];\n});\n\n_c = UserList;\n\nconst UserItem = props => {\n  _s2();\n\n  var _user$supervisor;\n\n  const {\n    user,\n    supervisors\n  } = props;\n  const [popupShown, setPopupShown] = useState(false);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setPopupShown(true),\n      className: \"flex flex-row justify-center w-full hover:bg-gray-400 p-5 border-b border-gray-400\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.type\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.firstname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: user.lastname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flex-1 text-center\",\n        children: (_user$supervisor = user.supervisor) === null || _user$supervisor === void 0 ? void 0 : _user$supervisor.firstname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this), popupShown ? /*#__PURE__*/_jsxDEV(UserViewForm, {\n      user: user,\n      update: props.update,\n      close: () => setPopupShown(false),\n      supervisors: supervisors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 18\n    }, this) : null]\n  }, void 0, true);\n};\n\n_s2(UserItem, \"3s3o9bVkFE3J9Ei9WDJsh8rCwko=\");\n\n_c2 = UserItem;\n\nconst UserViewForm = props => {\n  _s3();\n\n  const authContext = useContext(AuthContext);\n  const {\n    close,\n    supervisors\n  } = props;\n  let {\n    user\n  } = props;\n  const [form, setForm] = useState({ ...user\n  });\n\n  const onChange = event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (name === \"type\") {\n      if (value === \"admin\" || value === \"supervisor\") {\n        setForm({ ...form,\n          [name]: value,\n          supervisor: null\n        });\n        return;\n      }\n    }\n\n    setForm({ ...form,\n      [name]: value\n    });\n  };\n\n  const changeSupervisor = async event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (value == \"0\") {\n      setForm({ ...form,\n        supervisor: null\n      });\n      return;\n    }\n\n    for (let i = 0; i < supervisors.length; i++) {\n      if (supervisors[i].id == value) {\n        setForm({ ...form,\n          supervisor: supervisors[i]\n        });\n      }\n    }\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": bearer\n      },\n      body: JSON.stringify(form)\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n\n        for (const property in user) {\n          user[property] = form[property];\n        }\n\n        close();\n      } else {\n        console.log(res);\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const onDelete = async event => {\n    event.preventDefault();\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n      method: \"delete\",\n      headers: {\n        \"Authorization\": bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n        props.update();\n        close();\n      } else {\n        console.log(res);\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Popup, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-lg text-center\",\n          children: `${user.firstname} ${user.lastname}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: props.close,\n          className: \"material-icons cursor-pointer text-gray-600 hover:text-gray-800\",\n          children: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"email\",\n            onChange: onChange,\n            value: form.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Firstname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"firstname\",\n            onChange: onChange,\n            value: form.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lastname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"lastname\",\n            onChange: onChange,\n            value: form.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            name: \"type\",\n            onChange: onChange,\n            value: form.type,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"user\",\n              children: \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"supervisor\",\n              children: \"Supervisor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"admin\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Start date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"date\",\n            name: \"startDate\",\n            onChange: onChange,\n            value: form.startDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Supervisor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            disabled: form.type === \"supervisor\" || form.type === \"admin\",\n            name: \"supervisor\",\n            onChange: changeSupervisor,\n            value: form.supervisor == null ? 0 : form.supervisor.id,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 0,\n              children: \"No supervisor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 8\n            }, this), supervisors.map(supervisor => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: supervisor.id,\n              children: `${supervisor.firstname} ${supervisor.lastname}`\n            }, supervisor.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 9\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n          className: \"p-3 mt-3 w-40\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(DangerButton, {\n          onClick: onDelete,\n          className: \"p-3 mt-3 w-40\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 3\n  }, this);\n};\n\n_s3(UserViewForm, \"h1AyEwmNCorrT6U6vdX6ZewIEG0=\");\n\n_c3 = UserViewForm;\n\nconst AddUserForm = props => {\n  _s4();\n\n  const authContext = useContext(AuthContext);\n  const {\n    close,\n    supervisors\n  } = props;\n  const [form, setForm] = useState({\n    id: 0,\n    firstname: \"\",\n    lastname: \"\",\n    password: \"\",\n    email: \"\",\n    type: \"user\",\n    supervisor: null,\n    startDate: new Date(Date.now())\n  });\n\n  const onChange = event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (name === \"type\") {\n      if (value === \"admin\" || value === \"supervisor\") {\n        setForm({ ...form,\n          [name]: value,\n          supervisor: null\n        });\n        return;\n      }\n    }\n\n    setForm({ ...form,\n      [name]: value\n    });\n  };\n\n  const changeSupervisor = async event => {\n    event.preventDefault();\n    const {\n      name,\n      value\n    } = event.target;\n\n    if (value == \"0\") {\n      setForm({ ...form,\n        supervisor: null\n      });\n      return;\n    }\n\n    for (let i = 0; i < supervisors.length; i++) {\n      if (supervisors[i].id == value) {\n        setForm({ ...form,\n          supervisor: supervisors[i]\n        });\n      }\n    }\n  };\n\n  const onSubmit = async event => {\n    event.preventDefault();\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/admin/${authContext.userId}/users`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": bearer\n      },\n      body: JSON.stringify(form)\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n        props.update();\n        close();\n      } else {\n        console.log(res);\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Popup, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-row justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-lg text-center\",\n          children: \"Add User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: props.close,\n          className: \"material-icons cursor-pointer text-gray-600 hover:text-gray-800\",\n          children: \"close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"email\",\n            onChange: onChange,\n            value: form.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"password\",\n            onChange: onChange,\n            value: form.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Firstname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"firstname\",\n            onChange: onChange,\n            value: form.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Lastname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            name: \"lastname\",\n            onChange: onChange,\n            value: form.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            name: \"type\",\n            onChange: onChange,\n            value: form.type,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"user\",\n              children: \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"supervisor\",\n              children: \"Supervisor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"admin\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Start date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"date\",\n            name: \"startDate\",\n            onChange: onChange,\n            value: form.startDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Label, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Supervisor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            disabled: form.type === \"supervisor\" || form.type === \"admin\",\n            name: \"supervisor\",\n            onChange: changeSupervisor,\n            value: form.supervisor == null ? 0 : form.supervisor.id,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 0,\n              children: \"No supervisor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 8\n            }, this), supervisors.map(supervisor => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: supervisor.id,\n              children: `${supervisor.firstname} ${supervisor.lastname}`\n            }, supervisor.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 9\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n          className: \"p-3 mt-3 w-40\",\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 317,\n    columnNumber: 3\n  }, this);\n};\n\n_s4(AddUserForm, \"bW3o8vANXcRnsf+YNLIswEdB7UM=\");\n\n_c4 = AddUserForm;\nexport default UserList;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"UserList\");\n$RefreshReg$(_c2, \"UserItem\");\n$RefreshReg$(_c3, \"UserViewForm\");\n$RefreshReg$(_c4, \"AddUserForm\");","map":{"version":3,"sources":["/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/admin/UserList.tsx"],"names":["useContext","useEffect","useState","ContentPageContext","Popup","Label","Input","Select","ActionButton","Form","DangerButton","AuthContext","apiLink","useRouteMatch","useParams","UserList","props","userId","authContext","contentPageContext","url","setLocationList","title","users","setUsers","shouldUpdate","setShouldUpdate","bearer","jwtToken","fetch","headers","then","res","json","status","result","alert","message","catch","err","console","log","addUser","setAddUser","supervisors","filter","user","type","updateList","map","id","UserItem","popupShown","setPopupShown","email","firstname","lastname","supervisor","update","UserViewForm","close","form","setForm","onChange","event","preventDefault","name","value","target","changeSupervisor","i","length","onSubmit","method","body","JSON","stringify","property","onDelete","startDate","AddUserForm","password","Date","now"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAAsBC,kBAAtB,EAA0CC,KAA1C,EAAiDC,KAAjD,EAAwDC,KAAxD,EAA+DC,MAA/D,EAAuEC,YAAvE,EAAqFC,IAArF,EAA2FC,YAA3F,QAA+G,sBAA/G;AACA,SAASC,WAAT,QAA4B,QAA5B;AAEA,OAAOC,OAAP,MAAoB,QAApB;AACA,SAASC,aAAT,EAAwBC,SAAxB,QAAyC,kBAAzC;;;;AAGA,MAAMC,QAAQ,GAAIC,KAAD,IAAgB;AAAA;;AAChC,QAAM;AAAEC,IAAAA;AAAF,MAAaH,SAAS,EAA5B;AACA,QAAMI,WAAW,GAAGlB,UAAU,CAACW,WAAD,CAA9B;AACA,QAAMQ,kBAAkB,GAAGnB,UAAU,CAACG,kBAAD,CAArC;AACA,QAAM;AAAEiB,IAAAA;AAAF,MAAUP,aAAa,EAA7B;AAEAZ,EAAAA,SAAS,CAAC,MAAM;AACfkB,IAAAA,kBAAkB,CAACE,eAAnB,CAAmC,CAAC;AAAEC,MAAAA,KAAK,EAAE,WAAT;AAAsBF,MAAAA,GAAG,EAAEA;AAA3B,KAAD,CAAnC;AACA,GAFQ,EAEN,EAFM,CAAT;AAIA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAAS,EAAT,CAAlC;AACA,QAAM,CAACuB,YAAD,EAAeC,eAAf,IAAkCxB,QAAQ,CAAC,CAAD,CAAhD;AACAD,EAAAA,SAAS,CAAC,MAAM;AACf,UAAM0B,MAAM,GAAG,YAAYT,WAAW,CAACU,QAAvC;AACAC,IAAAA,KAAK,CAAE,GAAEjB,OAAQ,UAASK,MAAO,QAA5B,EAAqC;AACzCa,MAAAA,OAAO,EAAE;AACR,yBAAiBH;AADT;AADgC,KAArC,CAAL,CAKEI,IALF,CAKOC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALd,EAMEF,IANF,CAMOC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACE,MAAJ,KAAe,IAAnB,EAAyB;AACxBV,QAAAA,QAAQ,CAACQ,GAAG,CAACG,MAAL,CAAR;AACA,OAFD,MAEO;AACNC,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACA;AACD,KAZF,EAYIC,KAZJ,CAYUC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAZjB;AAaA,GAfQ,EAeN,CAACtB,MAAD,EAASQ,YAAT,CAfM,CAAT;AAiBA,QAAM,CAACiB,OAAD,EAAUC,UAAV,IAAwBzC,QAAQ,CAAC,KAAD,CAAtC;AAEA,QAAM0C,WAAW,GAAGrB,KAAK,CAACsB,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACC,IAAL,KAAc,YAAnC,CAApB;;AAEA,QAAMC,UAAU,GAAG,MAAM;AACxBtB,IAAAA,eAAe,CAACD,YAAY,GAAG,CAAhB,CAAf;AACA,GAFD;;AAGA,sBACC;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,4BACC,QAAC,YAAD;AAAc,MAAA,OAAO,EAAE,MAAMkB,UAAU,CAAC,IAAD,CAAvC;AAA+C,MAAA,UAAU,EAAC,OAA1D;AAAkE,MAAA,SAAS,EAAC,qBAA5E;AAAA,6BACC;AAAG,QAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD,EAKED,OAAO,gBAAG,QAAC,WAAD;AACV,MAAA,MAAM,EAAEM,UADE;AAEV,MAAA,WAAW,EAAEJ,WAFH;AAGV,MAAA,KAAK,EAAE,MAAMD,UAAU,CAAC,KAAD;AAHb;AAAA;AAAA;AAAA;AAAA,YAAH,GAG8B,IARvC,eAUC;AAAK,MAAA,SAAS,EAAC,wDAAf;AAAA,8BACC;AAAK,QAAA,SAAS,EAAC,mEAAf;AAAA,gCACC;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD,eAGC;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHD,eAIC;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJD,eAKC;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,EAQEpB,KAAK,CAAC0B,GAAN,CAAUH,IAAI,iBAAI,QAAC,QAAD;AAClB,QAAA,MAAM,EAAEE,UADU;AAElB,QAAA,IAAI,EAAEF,IAFY;AAGlB,QAAA,WAAW,EAAEF;AAHK,SAAeE,IAAI,CAACI,EAApB;AAAA;AAAA;AAAA;AAAA,cAAlB,CARF;AAAA;AAAA;AAAA;AAAA;AAAA,YAVD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AA0BA,CA9DD;;GAAMnC,Q;UACcD,S,EAGHD,a;;;KAJXE,Q;;AAgEN,MAAMoC,QAAQ,GAAInC,KAAD,IAAoE;AAAA;;AAAA;;AACpF,QAAM;AAAE8B,IAAAA,IAAF;AAAQF,IAAAA;AAAR,MAAwB5B,KAA9B;AACA,QAAM,CAACoC,UAAD,EAAaC,aAAb,IAA8BnD,QAAQ,CAAC,KAAD,CAA5C;AACA,sBACC;AAAA,4BACC;AAAK,MAAA,OAAO,EAAE,MAAMmD,aAAa,CAAC,IAAD,CAAjC;AACC,MAAA,SAAS,EAAC,oFADX;AAAA,8BAEC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA,kBAAmCP,IAAI,CAACC;AAAxC;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA,kBAAmCD,IAAI,CAACQ;AAAxC;AAAA;AAAA;AAAA;AAAA,cAHD,eAIC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA,kBAAmCR,IAAI,CAACS;AAAxC;AAAA;AAAA;AAAA;AAAA,cAJD,eAKC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA,kBAAmCT,IAAI,CAACU;AAAxC;AAAA;AAAA;AAAA;AAAA,cALD,eAMC;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA,sCAAmCV,IAAI,CAACW,UAAxC,qDAAmC,iBAAiBF;AAApD;AAAA;AAAA;AAAA;AAAA,cAND;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,EASEH,UAAU,gBAAG,QAAC,YAAD;AACb,MAAA,IAAI,EAAEN,IADO;AAEb,MAAA,MAAM,EAAE9B,KAAK,CAAC0C,MAFD;AAGb,MAAA,KAAK,EAAE,MAAML,aAAa,CAAC,KAAD,CAHb;AAIb,MAAA,WAAW,EAAET;AAJA;AAAA;AAAA;AAAA;AAAA,YAAH,GAIqB,IAbjC;AAAA,kBADD;AAiBA,CApBD;;IAAMO,Q;;MAAAA,Q;;AAsBN,MAAMQ,YAAY,GAAI3C,KAAD,IAKf;AAAA;;AACL,QAAME,WAAW,GAAGlB,UAAU,CAACW,WAAD,CAA9B;AACA,QAAM;AAAEiD,IAAAA,KAAF;AAAShB,IAAAA;AAAT,MAAyB5B,KAA/B;AACA,MAAI;AAAE8B,IAAAA;AAAF,MAAW9B,KAAf;AAEA,QAAM,CAAC6C,IAAD,EAAOC,OAAP,IAAkB5D,QAAQ,CAAO,EAAE,GAAG4C;AAAL,GAAP,CAAhC;;AAEA,QAAMiB,QAAQ,GAAIC,KAAD,IAA8B;AAC9CA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBH,KAAK,CAACI,MAA9B;;AAEA,QAAIF,IAAI,KAAK,MAAb,EAAqB;AACpB,UAAIC,KAAK,KAAK,OAAV,IAAqBA,KAAK,KAAK,YAAnC,EAAiD;AAChDL,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,WAACK,IAAD,GAAQC,KAAnB;AAA0BV,UAAAA,UAAU,EAAE;AAAtC,SAAD,CAAP;AACA;AACA;AACD;;AAEDK,IAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,OAACK,IAAD,GAAQC;AAAnB,KAAD,CAAP;AACA,GAZD;;AAcA,QAAME,gBAAgB,GAAG,MAAOL,KAAP,IAAoC;AAC5DA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBH,KAAK,CAACI,MAA9B;;AACA,QAAID,KAAK,IAAI,GAAb,EAAkB;AACjBL,MAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWJ,QAAAA,UAAU,EAAE;AAAvB,OAAD,CAAP;AACA;AACA;;AAED,SAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1B,WAAW,CAAC2B,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC5C,UAAI1B,WAAW,CAAC0B,CAAD,CAAX,CAAepB,EAAf,IAAqBiB,KAAzB,EAAgC;AAC/BL,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWJ,UAAAA,UAAU,EAAEb,WAAW,CAAC0B,CAAD;AAAlC,SAAD,CAAP;AACA;AACD;AACD,GAbD;;AAeA,QAAME,QAAQ,GAAG,MAAOR,KAAP,IAAkC;AAClDA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMtC,MAAM,GAAG,YAAYT,WAAW,CAACU,QAAvC;AACA,UAAMC,KAAK,CAAE,GAAEjB,OAAQ,UAASM,WAAW,CAACD,MAAO,UAAS6B,IAAI,CAACI,EAAG,EAAzD,EAA4D;AACtEuB,MAAAA,MAAM,EAAE,KAD8D;AAEtE3C,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,yBAAiBH;AAFT,OAF6D;AAMtE+C,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAef,IAAf;AANgE,KAA5D,CAAL,CAQJ9B,IARI,CAQCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARR,EASJF,IATI,CASCC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACE,MAAJ,KAAe,IAAnB,EAAyB;AACxBE,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;;AACA,aAAK,MAAMwC,QAAX,IAAuB/B,IAAvB,EAA6B;AAC3BA,UAAAA,IAAD,CAAc+B,QAAd,IAA2BhB,IAAD,CAAcgB,QAAd,CAA1B;AACA;;AACDjB,QAAAA,KAAK;AACL,OAND,MAMO;AACNpB,QAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAI,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACA;AACD,KApBI,EAoBFC,KApBE,CAoBIC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CApBX,CAAN;AAqBA,GAxBD;;AA0BA,QAAMuC,QAAQ,GAAG,MAAOd,KAAP,IAAkC;AAClDA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMtC,MAAM,GAAG,YAAYT,WAAW,CAACU,QAAvC;AACA,UAAMC,KAAK,CAAE,GAAEjB,OAAQ,UAASM,WAAW,CAACD,MAAO,UAAS6B,IAAI,CAACI,EAAG,EAAzD,EAA4D;AACtEuB,MAAAA,MAAM,EAAE,QAD8D;AAEtE3C,MAAAA,OAAO,EAAE;AACR,yBAAiBH;AADT;AAF6D,KAA5D,CAAL,CAMJI,IANI,CAMCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANR,EAOJF,IAPI,CAOCC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACE,MAAJ,KAAe,IAAnB,EAAyB;AACxBE,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACArB,QAAAA,KAAK,CAAC0C,MAAN;AACAE,QAAAA,KAAK;AACL,OAJD,MAIO;AACNpB,QAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAI,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACA;AACD,KAhBI,EAgBFC,KAhBE,CAgBIC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAhBX,CAAN;AAiBA,GApBD;;AAsBA,sBACC,QAAC,KAAD;AAAA,2BACC;AAAK,MAAA,SAAS,EAAC,+FAAf;AAAA,8BAEC;AAAK,QAAA,SAAS,EAAC,8BAAf;AAAA,gCACC;AAAG,UAAA,SAAS,EAAC,sCAAb;AAAA,oBAAsD,GAAEO,IAAI,CAACS,SAAU,IAAGT,IAAI,CAACU,QAAS;AAAxF;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC;AAAG,UAAA,OAAO,EAAExC,KAAK,CAAC4C,KAAlB;AAAyB,UAAA,SAAS,EAAC,iEAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD,eAOC,QAAC,IAAD;AAAM,QAAA,QAAQ,EAAEY,QAAhB;AAAA,gCACC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,OAAxB;AAAgC,YAAA,QAAQ,EAAET,QAA1C;AAAoD,YAAA,KAAK,EAAEF,IAAI,CAACP;AAAhE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAKC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,WAAxB;AAAoC,YAAA,QAAQ,EAAES,QAA9C;AAAwD,YAAA,KAAK,EAAEF,IAAI,CAACN;AAApE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBALD,eASC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,UAAxB;AAAmC,YAAA,QAAQ,EAAEQ,QAA7C;AAAuD,YAAA,KAAK,EAAEF,IAAI,CAACL;AAAnE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBATD,eAaC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,MAAD;AACC,YAAA,IAAI,EAAC,MADN;AACa,YAAA,QAAQ,EAAEO,QADvB;AAEC,YAAA,KAAK,EAAEF,IAAI,CAACd,IAFb;AAAA,oCAGC;AAAQ,cAAA,KAAK,EAAE,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHD,eAIC;AAAQ,cAAA,KAAK,EAAE,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJD,eAKC;AAAQ,cAAA,KAAK,EAAE,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbD,eAuBC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,WAAxB;AAAoC,YAAA,QAAQ,EAAEgB,QAA9C;AAAwD,YAAA,KAAK,EAAEF,IAAI,CAACkB;AAApE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBD,eA2BC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,MAAD;AACC,YAAA,QAAQ,EAAElB,IAAI,CAACd,IAAL,KAAc,YAAd,IAA8Bc,IAAI,CAACd,IAAL,KAAc,OADvD;AAEC,YAAA,IAAI,EAAC,YAFN;AAEmB,YAAA,QAAQ,EAAEsB,gBAF7B;AAGC,YAAA,KAAK,EAAER,IAAI,CAACJ,UAAL,IAAmB,IAAnB,GAA0B,CAA1B,GAA8BI,IAAI,CAACJ,UAAL,CAAgBP,EAHtD;AAAA,oCAKC;AAAQ,cAAA,KAAK,EAAE,CAAf;AAAA,wBAAmB;AAAnB;AAAA;AAAA;AAAA;AAAA,oBALD,EAMEN,WAAW,CAACK,GAAZ,CAAgBQ,UAAU,iBAC1B;AAEC,cAAA,KAAK,EAAEA,UAAU,CAACP,EAFnB;AAAA,wBAEyB,GAAEO,UAAU,CAACF,SAAU,IAAGE,UAAU,CAACD,QAAS;AAFvE,eACMC,UAAU,CAACP,EADjB;AAAA;AAAA;AAAA;AAAA,oBADA,CANF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3BD,eA0CC,QAAC,YAAD;AAAc,UAAA,SAAS,EAAC,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1CD,eA2CC,QAAC,YAAD;AAAc,UAAA,OAAO,EAAE4B,QAAvB;AAAiC,UAAA,SAAS,EAAC,eAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3CD;AAAA;AAAA;AAAA;AAAA;AAAA,cAPD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADD;AA0DA,CAnJD;;IAAMnB,Y;;MAAAA,Y;;AAqJN,MAAMqB,WAAW,GAAIhE,KAAD,IAId;AAAA;;AACL,QAAME,WAAW,GAAGlB,UAAU,CAACW,WAAD,CAA9B;AACA,QAAM;AAAEiD,IAAAA,KAAF;AAAShB,IAAAA;AAAT,MAAyB5B,KAA/B;AAEA,QAAM,CAAC6C,IAAD,EAAOC,OAAP,IAAkB5D,QAAQ,CAAO;AACtCgD,IAAAA,EAAE,EAAE,CADkC;AAEtCK,IAAAA,SAAS,EAAE,EAF2B;AAGtCC,IAAAA,QAAQ,EAAE,EAH4B;AAItCyB,IAAAA,QAAQ,EAAE,EAJ4B;AAKtC3B,IAAAA,KAAK,EAAE,EAL+B;AAMtCP,IAAAA,IAAI,EAAE,MANgC;AAOtCU,IAAAA,UAAU,EAAE,IAP0B;AAQtCsB,IAAAA,SAAS,EAAE,IAAIG,IAAJ,CAASA,IAAI,CAACC,GAAL,EAAT;AAR2B,GAAP,CAAhC;;AAWA,QAAMpB,QAAQ,GAAIC,KAAD,IAA8B;AAC9CA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBH,KAAK,CAACI,MAA9B;;AAEA,QAAIF,IAAI,KAAK,MAAb,EAAqB;AACpB,UAAIC,KAAK,KAAK,OAAV,IAAqBA,KAAK,KAAK,YAAnC,EAAiD;AAChDL,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,WAACK,IAAD,GAAQC,KAAnB;AAA0BV,UAAAA,UAAU,EAAE;AAAtC,SAAD,CAAP;AACA;AACA;AACD;;AACDK,IAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAW,OAACK,IAAD,GAAQC;AAAnB,KAAD,CAAP;AACA,GAXD;;AAaA,QAAME,gBAAgB,GAAG,MAAOL,KAAP,IAAoC;AAC5DA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBH,KAAK,CAACI,MAA9B;;AACA,QAAID,KAAK,IAAI,GAAb,EAAkB;AACjBL,MAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWJ,QAAAA,UAAU,EAAE;AAAvB,OAAD,CAAP;AACA;AACA;;AAED,SAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1B,WAAW,CAAC2B,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC5C,UAAI1B,WAAW,CAAC0B,CAAD,CAAX,CAAepB,EAAf,IAAqBiB,KAAzB,EAAgC;AAC/BL,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWJ,UAAAA,UAAU,EAAEb,WAAW,CAAC0B,CAAD;AAAlC,SAAD,CAAP;AACA;AACD;AACD,GAbD;;AAeA,QAAME,QAAQ,GAAG,MAAOR,KAAP,IAAkC;AAClDA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMtC,MAAM,GAAG,YAAYT,WAAW,CAACU,QAAvC;AACA,UAAMC,KAAK,CAAE,GAAEjB,OAAQ,UAASM,WAAW,CAACD,MAAO,QAAxC,EAAiD;AAC3DwD,MAAAA,MAAM,EAAE,MADmD;AAE3D3C,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,yBAAiBH;AAFT,OAFkD;AAM3D+C,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAef,IAAf;AANqD,KAAjD,CAAL,CAQJ9B,IARI,CAQCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARR,EASJF,IATI,CASCC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACE,MAAJ,KAAe,IAAnB,EAAyB;AACxBE,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACArB,QAAAA,KAAK,CAAC0C,MAAN;AACAE,QAAAA,KAAK;AACL,OAJD,MAIO;AACNpB,QAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACAI,QAAAA,KAAK,CAACJ,GAAG,CAACK,OAAL,CAAL;AACA;AACD,KAlBI,EAkBFC,KAlBE,CAkBIC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAlBX,CAAN;AAmBA,GAtBD;;AAyBA,sBACC,QAAC,KAAD;AAAA,2BACC;AAAK,MAAA,SAAS,EAAC,+FAAf;AAAA,8BAEC;AAAK,QAAA,SAAS,EAAC,8BAAf;AAAA,gCACC;AAAG,UAAA,SAAS,EAAC,sCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC;AAAG,UAAA,OAAO,EAAEvB,KAAK,CAAC4C,KAAlB;AAAyB,UAAA,SAAS,EAAC,iEAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD,eAOC,QAAC,IAAD;AAAM,QAAA,QAAQ,EAAEY,QAAhB;AAAA,gCACC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,OAAxB;AAAgC,YAAA,QAAQ,EAAET,QAA1C;AAAoD,YAAA,KAAK,EAAEF,IAAI,CAACP;AAAhE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAKC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,UAAxB;AAAmC,YAAA,QAAQ,EAAES,QAA7C;AAAuD,YAAA,KAAK,EAAEF,IAAI,CAACoB;AAAnE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBALD,eASC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,WAAxB;AAAoC,YAAA,QAAQ,EAAElB,QAA9C;AAAwD,YAAA,KAAK,EAAEF,IAAI,CAACN;AAApE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBATD,eAaC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,UAAxB;AAAmC,YAAA,QAAQ,EAAEQ,QAA7C;AAAuD,YAAA,KAAK,EAAEF,IAAI,CAACL;AAAnE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbD,eAiBC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,MAAD;AACC,YAAA,IAAI,EAAC,MADN;AACa,YAAA,QAAQ,EAAEO,QADvB;AAEC,YAAA,KAAK,EAAEF,IAAI,CAACd,IAFb;AAAA,oCAGC;AAAQ,cAAA,KAAK,EAAE,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHD,eAIC;AAAQ,cAAA,KAAK,EAAE,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJD,eAKC;AAAQ,cAAA,KAAK,EAAE,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjBD,eA2BC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,IAAI,EAAC,WAAxB;AAAoC,YAAA,QAAQ,EAAEgB,QAA9C;AAAwD,YAAA,KAAK,EAAEF,IAAI,CAACkB;AAApE;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3BD,eA+BC,QAAC,KAAD;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC,QAAC,MAAD;AACC,YAAA,QAAQ,EAAElB,IAAI,CAACd,IAAL,KAAc,YAAd,IAA8Bc,IAAI,CAACd,IAAL,KAAc,OADvD;AAEC,YAAA,IAAI,EAAC,YAFN;AAEmB,YAAA,QAAQ,EAAEsB,gBAF7B;AAGC,YAAA,KAAK,EAAER,IAAI,CAACJ,UAAL,IAAmB,IAAnB,GAA0B,CAA1B,GAA8BI,IAAI,CAACJ,UAAL,CAAgBP,EAHtD;AAAA,oCAKC;AAAQ,cAAA,KAAK,EAAE,CAAf;AAAA,wBAAmB;AAAnB;AAAA;AAAA;AAAA;AAAA,oBALD,EAMEN,WAAW,CAACK,GAAZ,CAAgBQ,UAAU,iBAC1B;AAEC,cAAA,KAAK,EAAEA,UAAU,CAACP,EAFnB;AAAA,wBAEyB,GAAEO,UAAU,CAACF,SAAU,IAAGE,UAAU,CAACD,QAAS;AAFvE,eACMC,UAAU,CAACP,EADjB;AAAA;AAAA;AAAA;AAAA,oBADA,CANF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/BD,eA8CC,QAAC,YAAD;AAAc,UAAA,SAAS,EAAC,eAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9CD;AAAA;AAAA;AAAA;AAAA;AAAA,cAPD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADD;AA6DA,CArID;;IAAM8B,W;;MAAAA,W;AAuIN,eAAejE,QAAf","sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { ContentPage, ContentPageContext, Popup, Label, Input, Select, ActionButton, Form, DangerButton } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport { formatDate } from '../util/Utils';\nimport apiLink from '../API';\nimport { useRouteMatch, useParams } from 'react-router-dom';\nimport { User } from '../types/Common';\n\nconst UserList = (props: any) => {\n\tconst { userId } = useParams() as any;\n\tconst authContext = useContext(AuthContext);\n\tconst contentPageContext = useContext(ContentPageContext);\n\tconst { url } = useRouteMatch();\n\n\tuseEffect(() => {\n\t\tcontentPageContext.setLocationList([{ title: \"User list\", url: url }]);\n\t}, []);\n\n\tconst [users, setUsers] = useState<User[]>([]);\n\tconst [shouldUpdate, setShouldUpdate] = useState(0);\n\tuseEffect(() => {\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tfetch(`${apiLink}/admin/${userId}/users`, {\n\t\t\theaders: {\n\t\t\t\t'Authorization': bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\tsetUsers(res.result);\n\t\t\t\t} else {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}, [userId, shouldUpdate]);\n\n\tconst [addUser, setAddUser] = useState(false);\n\n\tconst supervisors = users.filter(user => user.type === \"supervisor\");\n\n\tconst updateList = () => {\n\t\tsetShouldUpdate(shouldUpdate + 1);\n\t}\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<ActionButton onClick={() => setAddUser(true)} background=\"green\" className=\"p-1 mx-10 my-5 w-14\">\n\t\t\t\t<i className=\"material-icons\">add</i>\n\t\t\t</ActionButton>\n\n\t\t\t{addUser ? <AddUserForm\n\t\t\t\tupdate={updateList}\n\t\t\t\tsupervisors={supervisors}\n\t\t\t\tclose={() => setAddUser(false)} /> : null}\n\n\t\t\t<div className=\"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\">\n\t\t\t\t<div className=\"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Type</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Email</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Firstname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Lastname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Supervisor</p>\n\t\t\t\t</div>\n\t\t\t\t{users.map(user => <UserItem key={user.id} \n\t\t\t\t\tupdate={updateList} \n\t\t\t\t\tuser={user} \n\t\t\t\t\tsupervisors={supervisors} />)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst UserItem = (props: { user: User, supervisors: User[], update: () => void }) => {\n\tconst { user, supervisors } = props;\n\tconst [popupShown, setPopupShown] = useState(false);\n\treturn (\n\t\t<>\n\t\t\t<div onClick={() => setPopupShown(true)}\n\t\t\t\tclassName=\"flex flex-row justify-center w-full hover:bg-gray-400 p-5 border-b border-gray-400\">\n\t\t\t\t<p className=\"flex-1 text-center\">{user.type}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.email}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.firstname}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.lastname}</p>\n\t\t\t\t<p className=\"flex-1 text-center\">{user.supervisor?.firstname}</p>\n\t\t\t</div>\n\t\t\t{popupShown ? <UserViewForm\n\t\t\t\tuser={user}\n\t\t\t\tupdate={props.update}\n\t\t\t\tclose={() => setPopupShown(false)}\n\t\t\t\tsupervisors={supervisors} /> : null}\n\t\t</>\n\t);\n}\n\nconst UserViewForm = (props: {\n\tsupervisors: User[],\n\tuser: User,\n\tupdate: () => void,\n\tclose: () => void\n}) => {\n\tconst authContext = useContext(AuthContext);\n\tconst { close, supervisors } = props;\n\tlet { user } = props;\n\n\tconst [form, setForm] = useState<User>({ ...user });\n\n\tconst onChange = (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\n\t\tif (name === \"type\") {\n\t\t\tif (value === \"admin\" || value === \"supervisor\") {\n\t\t\t\tsetForm({ ...form, [name]: value, supervisor: null });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsetForm({ ...form, [name]: value });\n\t}\n\n\tconst changeSupervisor = async (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\t\tif (value == \"0\") {\n\t\t\tsetForm({ ...form, supervisor: null });\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < supervisors.length; i++) {\n\t\t\tif (supervisors[i].id == value) {\n\t\t\t\tsetForm({ ...form, supervisor: supervisors[i] });\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onSubmit = async (event: React.FormEvent) => {\n\t\tevent.preventDefault();\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n\t\t\tmethod: \"put\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": bearer\n\t\t\t},\n\t\t\tbody: JSON.stringify(form)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tfor (const property in user) {\n\t\t\t\t\t\t(user as any)[property] = (form as any)[property];\n\t\t\t\t\t}\n\t\t\t\t\tclose();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\tconst onDelete = async (event: React.FormEvent) => {\n\t\tevent.preventDefault();\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/admin/${authContext.userId}/users/${user.id}`, {\n\t\t\tmethod: \"delete\",\n\t\t\theaders: {\n\t\t\t\t\"Authorization\": bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tprops.update();\n\t\t\t\t\tclose();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\treturn (\n\t\t<Popup>\n\t\t\t<div className=\"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\">\n\n\t\t\t\t<div className=\"flex flex-row justify-center\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-lg text-center\">{`${user.firstname} ${user.lastname}`}</p>\n\t\t\t\t\t<i onClick={props.close} className=\"material-icons cursor-pointer text-gray-600 hover:text-gray-800\">close</i>\n\t\t\t\t</div>\n\n\t\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Email</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"email\" onChange={onChange} value={form.email}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Firstname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"firstname\" onChange={onChange} value={form.firstname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Lastname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"lastname\" onChange={onChange} value={form.lastname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Type</p>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"type\" onChange={onChange}\n\t\t\t\t\t\t\tvalue={form.type}>\n\t\t\t\t\t\t\t<option value={\"user\"}>User</option>\n\t\t\t\t\t\t\t<option value={\"supervisor\"}>Supervisor</option>\n\t\t\t\t\t\t\t<option value={\"admin\"}>Admin</option>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Start date</p>\n\t\t\t\t\t\t<Input type=\"date\" name=\"startDate\" onChange={onChange} value={form.startDate}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Supervisor</p>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tdisabled={form.type === \"supervisor\" || form.type === \"admin\"}\n\t\t\t\t\t\t\tname=\"supervisor\" onChange={changeSupervisor}\n\t\t\t\t\t\t\tvalue={form.supervisor == null ? 0 : form.supervisor.id}>\n\n\t\t\t\t\t\t\t<option value={0}>{\"No supervisor\"}</option>\n\t\t\t\t\t\t\t{supervisors.map(supervisor =>\n\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\tkey={supervisor.id}\n\t\t\t\t\t\t\t\t\tvalue={supervisor.id}>{`${supervisor.firstname} ${supervisor.lastname}`}</option>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<ActionButton className=\"p-3 mt-3 w-40\">Update</ActionButton>\n\t\t\t\t\t<DangerButton onClick={onDelete} className=\"p-3 mt-3 w-40\">Delete</DangerButton>\n\t\t\t\t</Form>\n\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nconst AddUserForm = (props: {\n\tsupervisors: User[],\n\tupdate: () => void,\n\tclose: () => void\n}) => {\n\tconst authContext = useContext(AuthContext);\n\tconst { close, supervisors } = props;\n\n\tconst [form, setForm] = useState<User>({\n\t\tid: 0,\n\t\tfirstname: \"\",\n\t\tlastname: \"\",\n\t\tpassword: \"\",\n\t\temail: \"\",\n\t\ttype: \"user\",\n\t\tsupervisor: null,\n\t\tstartDate: new Date(Date.now())\n\t});\n\n\tconst onChange = (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\n\t\tif (name === \"type\") {\n\t\t\tif (value === \"admin\" || value === \"supervisor\") {\n\t\t\t\tsetForm({ ...form, [name]: value, supervisor: null });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tsetForm({ ...form, [name]: value });\n\t}\n\n\tconst changeSupervisor = async (event: React.ChangeEvent) => {\n\t\tevent.preventDefault();\n\t\tconst { name, value } = event.target as any;\n\t\tif (value == \"0\") {\n\t\t\tsetForm({ ...form, supervisor: null });\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < supervisors.length; i++) {\n\t\t\tif (supervisors[i].id == value) {\n\t\t\t\tsetForm({ ...form, supervisor: supervisors[i] });\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onSubmit = async (event: React.FormEvent) => {\n\t\tevent.preventDefault();\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/admin/${authContext.userId}/users`, {\n\t\t\tmethod: \"post\",\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"Authorization\": bearer\n\t\t\t},\n\t\t\tbody: JSON.stringify(form)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tprops.update();\n\t\t\t\t\tclose();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\n\treturn (\n\t\t<Popup>\n\t\t\t<div className=\"flex flex-col items-stretch w-1/2 min-w-min min-h-screen m-auto bg-gray-200 p-5 text-gray-800\">\n\n\t\t\t\t<div className=\"flex flex-row justify-center\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-lg text-center\">Add User</p>\n\t\t\t\t\t<i onClick={props.close} className=\"material-icons cursor-pointer text-gray-600 hover:text-gray-800\">close</i>\n\t\t\t\t</div>\n\n\t\t\t\t<Form onSubmit={onSubmit}>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Email</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"email\" onChange={onChange} value={form.email}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Password</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"password\" onChange={onChange} value={form.password}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Firstname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"firstname\" onChange={onChange} value={form.firstname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Lastname</p>\n\t\t\t\t\t\t<Input type=\"text\" name=\"lastname\" onChange={onChange} value={form.lastname}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Type</p>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"type\" onChange={onChange}\n\t\t\t\t\t\t\tvalue={form.type}>\n\t\t\t\t\t\t\t<option value={\"user\"}>User</option>\n\t\t\t\t\t\t\t<option value={\"supervisor\"}>Supervisor</option>\n\t\t\t\t\t\t\t<option value={\"admin\"}>Admin</option>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Start date</p>\n\t\t\t\t\t\t<Input type=\"date\" name=\"startDate\" onChange={onChange} value={form.startDate}></Input>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<Label>\n\t\t\t\t\t\t<p>Supervisor</p>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tdisabled={form.type === \"supervisor\" || form.type === \"admin\"}\n\t\t\t\t\t\t\tname=\"supervisor\" onChange={changeSupervisor}\n\t\t\t\t\t\t\tvalue={form.supervisor == null ? 0 : form.supervisor.id}>\n\n\t\t\t\t\t\t\t<option value={0}>{\"No supervisor\"}</option>\n\t\t\t\t\t\t\t{supervisors.map(supervisor =>\n\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\tkey={supervisor.id}\n\t\t\t\t\t\t\t\t\tvalue={supervisor.id}>{`${supervisor.firstname} ${supervisor.lastname}`}</option>)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</Label>\n\t\t\t\t\t<ActionButton className=\"p-3 mt-3 w-40\">Add</ActionButton>\n\t\t\t\t</Form>\n\n\t\t\t</div>\n\t\t</Popup>\n\t);\n}\n\nexport default UserList;\n"]},"metadata":{},"sourceType":"module"}