{"ast":null,"code":"var _jsxFileName = \"/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/supervisor/UserList.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { ContentPageContext } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport apiLink from '../API';\nimport { Switch, Route, useHistory, useRouteMatch, useParams, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\n/** The users page */\nconst Users = props => {\n  _s();\n\n  const {\n    url,\n    path\n  } = useRouteMatch();\n  return /*#__PURE__*/_jsxDEV(Switch, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: `${path}/:requestsUserId/`,\n      children: /*#__PURE__*/_jsxDEV(UserRequestList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: `${path}/`,\n      children: /*#__PURE__*/_jsxDEV(UserList, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 3\n  }, this);\n};\n/** \n* Displays the user list page\n* @function UserList\n* */\n\n\n_s(Users, \"1MAQBxDT46WWsBhoM12Ck4Kdmsw=\", false, function () {\n  return [useRouteMatch];\n});\n\n_c = Users;\n\nconst UserList = props => {\n  _s2();\n\n  const {\n    userId\n  } = useParams();\n  const authContext = useContext(AuthContext);\n  const {\n    url\n  } = useRouteMatch();\n  /* Set the location list in the header of the page */\n\n  const contentPageContext = useContext(ContentPageContext);\n  useEffect(() => {\n    contentPageContext.setLocationList([{\n      title: \"User list\",\n      url: url\n    }]);\n  }, []);\n  /* Set up the state that holds the users, and also a value for updating the\n  * list with a callback*/\n\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    fetch(`${apiLink}/supervisor/${userId}/users`, {\n      headers: {\n        'Authorization': bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        const usrs = res.result;\n        setUsers(usrs.filter(usr => usr.id != authContext.userId));\n      } else {\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Firstname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Lastname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"See requests\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(UserItem, {\n        user: user\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 24\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 3\n  }, this);\n};\n/**\n* Displays a user list item\n* @function UserItem\n* @param {Object} props - The props of the component\n* @param {User} props.user - The user this item represents\n* @param {User[]} props.supervisors - The list of available supervisors\n* @returns A single user item for the user list\n* */\n\n\n_s2(UserList, \"EB49xR2UUEreurenAr4AgHyM5RY=\", false, function () {\n  return [useParams, useRouteMatch];\n});\n\n_c2 = UserList;\n\nconst UserItem = props => {\n  _s3();\n\n  const {\n    user\n  } = props;\n  const history = useHistory();\n  const {\n    url\n  } = useRouteMatch();\n\n  const onClick = () => {\n    history.push(`${url}/${user.id}`, user);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-row justify-center w-full p-5 border-b border-gray-400\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: user.type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: user.email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: user.firstname\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: user.lastname\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex justify-center items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClick,\n        className: \"focus:outline-none flex justify-center  items-center bg-transparent text-black hover:bg-gray-300 rounded-full p-1\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"material-icons hover:cursor-pointer\",\n          children: \"arrow_right\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 3\n  }, this);\n};\n/** Displays the requests of a user */\n\n\n_s3(UserItem, \"qh6FbuXMA6PtTFq43JJEYnOZ9yo=\", false, function () {\n  return [useHistory, useRouteMatch];\n});\n\n_c3 = UserItem;\n\nconst UserRequestList = props => {\n  _s4();\n\n  const authContext = useContext(AuthContext);\n  const {\n    url\n  } = useRouteMatch();\n  const location = useLocation();\n  const user = location.state;\n  /* Set the location list in the header of the page */\n\n  const contentPageContext = useContext(ContentPageContext);\n  useEffect(() => {\n    const locationList = contentPageContext.getLocationList();\n    const name = `${user.firstname} ${user.lastname}`;\n    contentPageContext.setLocationList([...locationList, {\n      title: name,\n      url: url,\n      state: user\n    }]);\n  }, []);\n  /* Set up the state that holds the requests, and also a value for updating the\n  * list with a callback*/\n\n  const [requests, setRequests] = useState([]);\n  useEffect(() => {\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    fetch(`${apiLink}/supervisor/${authContext.userId}/users/${user.id}/requests`, {\n      headers: {\n        'Authorization': bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        setRequests(res.result);\n      } else {\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  }, [authContext.userId, user.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Start date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"End date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold flex-1 text-center\",\n          children: \"Actions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }, this), requests.map(request => /*#__PURE__*/_jsxDEV(RequestItem, {\n        request: request\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 31\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 3\n  }, this);\n};\n/** \n* Displays a request list item\n* @function RequestItem\n* @param {Object} props - The props of the component\n* @param {Request} props.request - The request this item represents\n* @returns A single request item for the request list\n* */\n\n\n_s4(UserRequestList, \"CObnohQRzIk+KwNwMj+w0WwXWZg=\", false, function () {\n  return [useRouteMatch, useLocation];\n});\n\n_c4 = UserRequestList;\n\nconst RequestItem = props => {\n  _s5();\n\n  const authContext = useContext(AuthContext);\n  const [request, setRequest] = useState(props.request);\n\n  const onIconClicked = async value => {\n    const bearer = \"Bearer \" + authContext.jwtToken;\n    await fetch(`${apiLink}/supervisor/${authContext.userId}/requests/${request.id}?approved=${value}`, {\n      method: \"put\",\n      headers: {\n        \"Authorization\": bearer\n      }\n    }).then(res => res.json()).then(res => {\n      if (res.status === \"OK\") {\n        alert(res.message);\n        setRequest({ ...request,\n          approved: value\n        });\n      } else {\n        alert(res.message);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const circleColor = request.approved ? \"green\" : \"red\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-row justify-center w-full p-5 border-b border-gray-400\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: `${request.user.firstname} ${request.user.lastname}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: request.startDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"flex-1 text-center\",\n      children: request.endDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex justify-center items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-6 h-6 rounded-full bg-${circleColor}-700 mr-3`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-row justify-around text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"focus:outline-none flex justify-center  items-center bg-transparent text-green-700 hover:bg-gray-300 rounded-full p-1\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: () => onIconClicked(true),\n          className: \"material-icons hover:text-green-700 hover:cursor-pointer\",\n          children: \"done\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"focus:outline-none flex justify-center  items-center bg-transparent text-red-700 hover:bg-gray-300 rounded-full p-1\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: () => onIconClicked(false),\n          className: \"material-icons hover:text-red-700 hover:cursor-pointer\",\n          children: \"cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 3\n  }, this);\n};\n\n_s5(RequestItem, \"0nsTxbzO1eQMSlfGP6PiPODcYow=\");\n\n_c5 = RequestItem;\nexport default Users;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Users\");\n$RefreshReg$(_c2, \"UserList\");\n$RefreshReg$(_c3, \"UserItem\");\n$RefreshReg$(_c4, \"UserRequestList\");\n$RefreshReg$(_c5, \"RequestItem\");","map":{"version":3,"sources":["/home/ergys/Desktop/Projects/Java/lufthansa-test-project/FrontEndClient/src/supervisor/UserList.tsx"],"names":["useContext","useEffect","useState","ContentPageContext","AuthContext","apiLink","Switch","Route","useHistory","useRouteMatch","useParams","useLocation","Users","props","url","path","UserList","userId","authContext","contentPageContext","setLocationList","title","users","setUsers","bearer","jwtToken","fetch","headers","then","res","json","status","usrs","result","filter","usr","id","alert","message","catch","err","console","log","map","user","UserItem","history","onClick","push","type","email","firstname","lastname","UserRequestList","location","state","locationList","getLocationList","name","requests","setRequests","request","RequestItem","setRequest","onIconClicked","value","method","approved","circleColor","startDate","endDate"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { ContentPage, ContentPageContext, Popup, Label, Input, Select, ActionButton, Form, DangerButton } from '../styled/Components';\nimport { AuthContext } from '../App';\nimport apiLink from '../API';\nimport { Switch, Route, Link, useHistory, useRouteMatch, useParams, useLocation } from 'react-router-dom';\nimport { User, Request } from '../types/Common';\n\n\n/** The users page */\nconst Users = (props: any) => {\n\tconst { url, path } = useRouteMatch();\n\treturn (\n\t\t<Switch>\n\n\t\t\t<Route path={`${path}/:requestsUserId/`}>\n\t\t\t\t<UserRequestList />\n\t\t\t</Route>\n\n\t\t\t<Route path={`${path}/`}>\n\t\t\t\t<UserList />\n\t\t\t</Route>\n\n\t\t</Switch>\n\t);\n}\n\n/** \n* Displays the user list page\n* @function UserList\n* */\nconst UserList = (props: any) => {\n\tconst { userId } = useParams() as any;\n\tconst authContext = useContext(AuthContext);\n\tconst { url } = useRouteMatch();\n\n\t/* Set the location list in the header of the page */\n\tconst contentPageContext = useContext(ContentPageContext);\n\tuseEffect(() => {\n\t\tcontentPageContext.setLocationList([{ title: \"User list\", url: url }]);\n\t}, []);\n\n\t/* Set up the state that holds the users, and also a value for updating the\n\t* list with a callback*/\n\tconst [users, setUsers] = useState<User[]>([]);\n\tuseEffect(() => {\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tfetch(`${apiLink}/supervisor/${userId}/users`, {\n\t\t\theaders: {\n\t\t\t\t'Authorization': bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\tconst usrs = res.result as User[];\n\t\t\t\t\tsetUsers(usrs.filter(usr => usr.id != authContext.userId));\n\t\t\t\t} else {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}, [userId]);\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<div className=\"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\">\n\t\t\t\t<div className=\"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Type</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Email</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Firstname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Lastname</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">See requests</p>\n\t\t\t\t</div>\n\t\t\t\t{users.map(user => <UserItem key={user.id} user={user} />)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/**\n* Displays a user list item\n* @function UserItem\n* @param {Object} props - The props of the component\n* @param {User} props.user - The user this item represents\n* @param {User[]} props.supervisors - The list of available supervisors\n* @returns A single user item for the user list\n* */\nconst UserItem = (props: { user: User }) => {\n\tconst { user } = props;\n\tconst history = useHistory();\n\tconst { url } = useRouteMatch();\n\tconst onClick = () => {\n\t\thistory.push(`${url}/${user.id}`, user);\n\t}\n\treturn (\n\t\t<div className=\"flex flex-row justify-center w-full p-5 border-b border-gray-400\">\n\t\t\t<p className=\"flex-1 text-center\">{user.type}</p>\n\t\t\t<p className=\"flex-1 text-center\">{user.email}</p>\n\t\t\t<p className=\"flex-1 text-center\">{user.firstname}</p>\n\t\t\t<p className=\"flex-1 text-center\">{user.lastname}</p>\n\t\t\t<div className=\"flex-1 flex justify-center items-center\">\n\t\t\t\t<button onClick={onClick} className=\"focus:outline-none flex justify-center \n\t\t\t\t\titems-center bg-transparent text-black hover:bg-gray-300 rounded-full p-1\">\n\t\t\t\t\t<i className=\"material-icons hover:cursor-pointer\">arrow_right</i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/** Displays the requests of a user */\nconst UserRequestList = (props: any) => {\n\tconst authContext = useContext(AuthContext);\n\tconst { url } = useRouteMatch();\n\tconst location = useLocation();\n\tconst user: User = location.state as User;\n\n\t/* Set the location list in the header of the page */\n\tconst contentPageContext = useContext(ContentPageContext);\n\tuseEffect(() => {\n\t\tconst locationList = contentPageContext.getLocationList();\n\t\tconst name = `${user.firstname} ${user.lastname}`;\n\t\tcontentPageContext.setLocationList([\n\t\t\t...locationList,\n\t\t\t{ title: name, url: url, state: user }\n\t\t]);\n\t}, []);\n\n\t/* Set up the state that holds the requests, and also a value for updating the\n\t* list with a callback*/\n\tconst [requests, setRequests] = useState<Request[]>([]);\n\tuseEffect(() => {\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tfetch(`${apiLink}/supervisor/${authContext.userId}/users/${user.id}/requests`, {\n\t\t\theaders: {\n\t\t\t\t'Authorization': bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\tsetRequests(res.result);\n\t\t\t\t} else {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}, [authContext.userId, user.id]);\n\n\n\treturn (\n\t\t<div className=\"flex flex-col\">\n\t\t\t<div className=\"mx-10 border-l-2 border-r-2 border-b-2 border-gray-800\">\n\t\t\t\t<div className=\"bg-gray-800 flex flex-row justify-center w-full text-gray-300 p-2\">\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">User</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Start date</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">End date</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Status</p>\n\t\t\t\t\t<p className=\"font-bold flex-1 text-center\">Actions</p>\n\t\t\t\t</div>\n\t\t\t\t{requests.map(request => (<RequestItem request={request} />))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n/** \n* Displays a request list item\n* @function RequestItem\n* @param {Object} props - The props of the component\n* @param {Request} props.request - The request this item represents\n* @returns A single request item for the request list\n* */\nconst RequestItem = (props: { request: Request }) => {\n\tconst authContext = useContext(AuthContext);\n\tconst [request, setRequest] = useState(props.request);\n\n\tconst onIconClicked = async (value: boolean) => {\n\t\tconst bearer = \"Bearer \" + authContext.jwtToken;\n\t\tawait fetch(`${apiLink}/supervisor/${authContext.userId}/requests/${request.id}?approved=${value}`, {\n\t\t\tmethod: \"put\",\n\t\t\theaders: {\n\t\t\t\t\"Authorization\": bearer\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === \"OK\") {\n\t\t\t\t\talert(res.message);\n\t\t\t\t\tsetRequest({ ...request, approved: value });\n\t\t\t\t} else {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t}).catch(err => console.log(err));\n\t}\n\n\tconst circleColor = request.approved ? \"green\" : \"red\";\n\treturn (\n\t\t<div className=\"flex flex-row justify-center w-full p-5 border-b border-gray-400\">\n\t\t\t<p className=\"flex-1 text-center\">{`${request.user.firstname} ${request.user.lastname}`}</p>\n\t\t\t<p className=\"flex-1 text-center\">{request.startDate}</p>\n\t\t\t<p className=\"flex-1 text-center\">{request.endDate}</p>\n\t\t\t<div className=\"flex-1 flex justify-center items-center\">\n\t\t\t\t<div className={`w-6 h-6 rounded-full bg-${circleColor}-700 mr-3`}></div>\n\t\t\t</div>\n\t\t\t<div className=\"flex-1 flex flex-row justify-around text-center\">\n\t\t\t\t<button className=\"focus:outline-none flex justify-center \n\t\t\t\t\titems-center bg-transparent text-green-700 hover:bg-gray-300 rounded-full p-1\">\n\t\t\t\t\t<i onClick={() => onIconClicked(true)} className=\"material-icons hover:text-green-700 hover:cursor-pointer\">done</i>\n\t\t\t\t</button>\n\t\t\t\t<button className=\"focus:outline-none flex justify-center \n\t\t\t\t\titems-center bg-transparent text-red-700 hover:bg-gray-300 rounded-full p-1\">\n\t\t\t\t\t<i onClick={() => onIconClicked(false)} className=\"material-icons hover:text-red-700 hover:cursor-pointer\">cancel</i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Users;\n"]},"metadata":{},"sourceType":"module"}